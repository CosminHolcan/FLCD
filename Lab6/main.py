from Grammar import Grammar
from Parser import LRParser


if __name__=="__main__":
    grammar = Grammar()
    grammar.readFromFile("g1.txt")
    # print(grammar.productions)
    lrp = LRParser(grammar)
    # print(lrp.closure(]))
    # print(lrp.goto(["S'", [".",'a' , 'A']], "a"))
    print(lrp.ColCan() == [[['start', ['.', 'S']], ['S', ['.', 'a', 'S', 'b']], ['S', ['.', 'A', 'b', 'c']], ['S', ['.', 'c', 'B']], ['A', ['.', 'a', 'A']], ['A', ['.', 'a']]], [['start', ['S', '.']]], [['S', ['A', '.', 'b', 'c']]], [['S', ['a', '.', 'S', 'b']], ['A', ['a', '.', 'A']], ['A', ['a', '.']], ['S', ['.', 'a', 'S', 'b']], ['S', ['.', 'A', 'b', 'c']], ['S', ['.', 'c', 'B']], ['A', ['.', 'a', 'A']], ['A', ['.', 'a']]], [['S', ['c', '.', 'B']], ['B', ['.', 'b', 'c', 'B']], ['B', ['.', 'b']]], [['S', ['A', 'b', '.', 'c']]], [['S', ['a', 'S', '.', 'b']]], [['A', ['a', 'A', '.']], ['S', ['A', '.', 'b', 'c']]], [['S', ['c', 'B', '.']]], [['B', ['b', '.', 'c', 'B']], ['B', ['b', '.']]], [['S', ['A', 'b', 'c', '.']]], [['S', ['a', 'S', 'b', '.']]], [['B', ['b', 'c', '.', 'B']], ['B', ['.', 'b', 'c', 'B']], ['B', ['.', 'b']]], [['B', ['b', 'c', 'B', '.']]]])
    # for e in lrp.HolCan():
    #     print(e)
    print(lrp.states == [[['start', ['.', 'S']], ['S', ['.', 'a', 'S', 'b']], ['S', ['.', 'A', 'b', 'c']], ['S', ['.', 'c', 'B']], ['A', ['.', 'a', 'A']], ['A', ['.', 'a']]], [['start', ['S', '.']]], [['S', ['A', '.', 'b', 'c']]], [['S', ['a', '.', 'S', 'b']], ['A', ['a', '.', 'A']], ['A', ['a', '.']], ['S', ['.', 'a', 'S', 'b']], ['S', ['.', 'A', 'b', 'c']], ['S', ['.', 'c', 'B']], ['A', ['.', 'a', 'A']], ['A', ['.', 'a']]], [['S', ['c', '.', 'B']], ['B', ['.', 'b', 'c', 'B']], ['B', ['.', 'b']]], [['S', ['A', 'b', '.', 'c']]], [['S', ['a', 'S', '.', 'b']]], [['A', ['a', 'A', '.']], ['S', ['A', '.', 'b', 'c']]], [['S', ['c', 'B', '.']]], [['B', ['b', '.', 'c', 'B']], ['B', ['b', '.']]], [['S', ['A', 'b', 'c', '.']]], [['S', ['a', 'S', 'b', '.']]], [['B', ['b', 'c', '.', 'B']], ['B', ['.', 'b', 'c', 'B']], ['B', ['.', 'b']]], [['B', ['b', 'c', 'B', '.']]]])
    print(lrp.table == {1: {'S': 0}, 2: {'A': 0}, 3: {'a': 0}, 4: {'c': 0}, 5: {'b': 2}, 6: {'S': 3}, 7: {'A': 3}, 8: {'B': 4}, 9: {'b': 4}, 10: {'c': 5}, 11: {'b': 6}, 12: {'c': 9}, 13: {'B': 12}})
    # for e in lrp.states:
    #     print(e)
    # for key in lrp.table:
    #     print(key, lrp.table[key])
